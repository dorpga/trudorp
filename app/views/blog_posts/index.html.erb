<% container do %>
<div class="uk-margin-medium-bottom">
  <% if can? :create, BlogPost %>
  <%= link_to "New", new_blog_post_path, class: 'uk-button uk-button-primary' %>
  <% end %>
</div>

<% @blog_posts.each do |post| %>
<article class="uk-article">

  <h1 class="uk-article-title"><%= link_to post.title, blog_post_path(post), class: 'uk-link-reset' %></h1>

  <p class="uk-article-meta">Written
    <% if post.user %>by
    <%= link_to post.user.username, user_path(post.user) %>
    on
    <%= post.created_at.strftime('%b %d, %Y') %>.</p>
    <% end %>
  <p><% if post.body %><%= strip_tags post.body.truncate(358) %><% end %></p>

  <div class="uk-grid-small uk-child-width-auto" uk-grid>
    <div>
      <%= link_to "Read more", blog_post_path(post), class: 'uk-button uk-button-text' %>
      <% if can? :update, BlogPost %>
      <%= link_to "Edit", edit_blog_post_path(post), class: 'uk-button uk-button-text' %>
      <% end %>
      <% if can? :delete, BlogPost %>
      <%= link_to "Delete", blog_post_path(post), data: {confirm: "Are you sure?"}, :method => :delete, class: 'uk-button uk-button-text' %>
      <% end %>
    </div>
  </div>

</article>
<% end %>
<% end %>
